<!doctype html>
<html lang="pt-BR">
<head>
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NFY6RYBJZJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NFY6RYBJZJ');
  </script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-9409384061040545">
  <title>Comparador de Texto — TechSync</title>
  <link rel="stylesheet" href="/css/style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <style>
    .tool-wrap{max-width:1200px;margin:1rem auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(13,24,48,0.06)}
    .tool-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #e6e9ef;color:#333}
    .panels{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .panel{border:1px solid #e6e9ef;border-radius:8px;overflow:hidden;display:flex}
    .panel h3{margin:0;padding:10px;background:#fafafa;border-bottom:1px solid #eee;font-size:14px;width:100%}
    textarea{width:100%;height:320px;border:0;padding:12px;box-sizing:border-box;font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:13px;resize:vertical;line-height:1.4}
    .line-numbers{background:#f7f7f7;border-right:1px solid #eee;padding:12px 6px;text-align:right;color:#888;font-family:Menlo,monospace;font-size:13px;user-select:none}
    .line-numbers div{height:1.4em}
    .result-wrap{margin-top:12px}
    .diff-row{display:flex;align-items:flex-start;border-bottom:1px solid #f0f2f6}
    .diff-line-num{width:50px;padding:8px 6px;background:#fbfbfb;border-right:1px solid #f0f2f6;color:#666;text-align:right;user-select:none}
    .diff-text{flex:1;padding:8px;white-space:pre-wrap;font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:13px}
    .row-equal{background:transparent}
    .row-added{background:#ecffef}
    .row-removed{background:#fff0f0}
    .unified{font-family:Menlo,monospace;background:#0b1220;color:#dbeafe;padding:12px;border-radius:8px;overflow:auto}
    .small{font-size:13px;color:#666}
    @media(max-width:900px){.panels{grid-template-columns:1fr} .diff-row{flex-direction:row}.diff-line-num{width:40px}}
  </style>
</head>
<body>
  <!-- Header -->
  <div id="header-container"></div>

  <!-- Breadcrumb -->
  <div class="breadcrumb-container">
    <nav class="breadcrumb">
      <a href="/"><i class="fas fa-home"></i> Início</a>
      <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
      <a href="/categories/tools/tools-index.html"><i class="fas fa-tools"></i> Ferramentas</a>
      <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
      <span>Comparador de Texto</span>
    </nav>
  </div>

  <main class="container">
    <div class="tool-wrap">
      <div class="tool-head">
        <div>
          <h2>Comparador de Texto (Diff)</h2>
          <div class="small">Compare dois blocos de texto/código e veja as diferenças por linha. Não precisa de backend — tudo no navegador.</div>
        </div>
        <div class="controls">
          <button class="btn" id="compareBtn">Comparar</button>
          <button class="btn ghost" id="unifiedBtn">Ver diff unificado</button>
          <button class="btn ghost" id="swapBtn">Trocar</button>
          <button class="btn ghost" id="clearBtn">Limpar</button>
        </div>
      </div>

      <div class="panels">
        <div class="panel">
          <h3>Original / Versão A</h3>
        </div>
        <div class="panel">
          <h3>Modificado / Versão B</h3>
        </div>
      </div>
      <div class="panels">
        <div class="panel">
          <div class="line-numbers" id="lineNumsLeft"></div>
          <textarea id="left" placeholder="Cole o texto original aqui...">function soma(a, b) {
  return a + b;
}

console.log(soma(2, 3));</textarea>
        </div>

        <div class="panel">
          <div class="line-numbers" id="lineNumsRight"></div>
          <textarea id="right" placeholder="Cole o texto modificado aqui...">function soma(a, b, c) {
  return a + b + (c || 0);
}

console.log(soma(2, 3));
console.log('Nova linha');</textarea>
        </div>
      </div>

      <div class="result-wrap" id="resultWrap"></div>

      <p class="small" style="margin-top:12px">Dica: use Ctrl+Enter para comparar rapidamente.</p>
    </div>

  </main>
  <!-- Footer -->
  <div id="footer-container"></div>
  <script src="/js/pageComponents.js"></script>
  <script>
    const leftTA = document.getElementById('left')
    const rightTA = document.getElementById('right')
    const resultWrap = document.getElementById('resultWrap')
    const compareBtn = document.getElementById('compareBtn')
    const swapBtn = document.getElementById('swapBtn')
    const clearBtn = document.getElementById('clearBtn')
    const unifiedBtn = document.getElementById('unifiedBtn')
    const lineNumsLeft = document.getElementById('lineNumsLeft')
    const lineNumsRight = document.getElementById('lineNumsRight')

    function updateLineNumbers(textarea, container){
      const lines = textarea.value.split(/\n/).length
      container.innerHTML = ''
      for(let i=1;i<=lines;i++){
        const div = document.createElement('div')
        div.textContent = i
        container.appendChild(div)
      }
    }

    [leftTA,rightTA].forEach((ta,idx)=>{
      ta.addEventListener('input', ()=> updateLineNumbers(ta, idx===0? lineNumsLeft: lineNumsRight))
      updateLineNumbers(ta, idx===0? lineNumsLeft: lineNumsRight)
    })

    function splitLines(s){
      return s.replace(/\r\n/g,'\n').replace(/\r/g,'\n').split('\n')
    }

    function buildLCS(a, b){
      const n = a.length, m = b.length
      const dp = Array(n+1).fill(null).map(()=>Array(m+1).fill(0))
      for(let i=1;i<=n;i++){
        for(let j=1;j<=m;j++){
          if(a[i-1] === b[j-1]) dp[i][j] = dp[i-1][j-1] + 1
          else dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1])
        }
      }
      return dp
    }

    function backtrackDiff(a, b, dp){
      const res = []
      let i = a.length, j = b.length
      while(i>0 && j>0){
        if(a[i-1] === b[j-1]){ res.unshift({type:'=', a: a[i-1], b: b[j-1], lineA:i, lineB:j}); i--; j-- }
        else if(dp[i-1][j] >= dp[i][j-1]){ res.unshift({type:'-', a: a[i-1], lineA:i}); i-- }
        else { res.unshift({type:'+', b: b[j-1], lineB:j}); j-- }
      }
      while(i>0){ res.unshift({type:'-', a: a[i-1], lineA:i}); i-- }
      while(j>0){ res.unshift({type:'+', b: b[j-1], lineB:j}); j-- }
      return res
    }

    function renderSideBySide(diff){
      const container = document.createElement('div')
      diff.forEach(item=>{
        const row = document.createElement('div')
        row.className = 'diff-row'

        const leftNum = document.createElement('div')
        leftNum.className = 'diff-line-num'
        leftNum.textContent = item.lineA || ''
        const leftText = document.createElement('div')
        leftText.className = 'diff-text'
        leftText.textContent = item.a || ''
        if(item.type==='-') leftText.classList.add('row-removed')

        const rightNum = document.createElement('div')
        rightNum.className = 'diff-line-num'
        rightNum.textContent = item.lineB || ''
        const rightText = document.createElement('div')
        rightText.className = 'diff-text'
        rightText.textContent = item.b || ''
        if(item.type==='+') rightText.classList.add('row-added')

        row.appendChild(leftNum)
        row.appendChild(leftText)
        row.appendChild(rightNum)
        row.appendChild(rightText)
        container.appendChild(row)
      })
      return container
    }

    function renderUnified(diff){
      const lines = []
      diff.forEach(item=>{
        if(item.type==='=') lines.push('  ' + item.a)
        else if(item.type==='-') lines.push('- ' + item.a)
        else if(item.type==='+') lines.push('+ ' + item.b)
      })
      const pre = document.createElement('pre')
      pre.className = 'unified'
      pre.textContent = lines.join('\n')
      return pre
    }

    function computeAndRender(){
      const a = splitLines(leftTA.value)
      const b = splitLines(rightTA.value)
      const dp = buildLCS(a,b)
      const diff = backtrackDiff(a,b,dp)
      resultWrap.innerHTML = ''
      resultWrap.appendChild(renderSideBySide(diff))
      resultWrap._lastDiff = diff
    }

    compareBtn.addEventListener('click', computeAndRender)
    unifiedBtn.addEventListener('click', ()=>{
      if(!resultWrap._lastDiff) computeAndRender()
      const pre = renderUnified(resultWrap._lastDiff)
      const existing = resultWrap.querySelector('.unified')
      if(existing){ existing.remove() }
      else { resultWrap.appendChild(pre) }
    })

    swapBtn.addEventListener('click', ()=>{
      const t = leftTA.value; leftTA.value = rightTA.value; rightTA.value = t; computeAndRender(); updateLineNumbers(leftTA,lineNumsLeft); updateLineNumbers(rightTA,lineNumsRight);
    })

    clearBtn.addEventListener('click', ()=>{ leftTA.value = ''; rightTA.value = ''; resultWrap.innerHTML = ''; updateLineNumbers(leftTA,lineNumsLeft); updateLineNumbers(rightTA,lineNumsRight) })

    [leftTA, rightTA].forEach(el=> el.addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey) && e.key === 'Enter'){ computeAndRender() } }))

    computeAndRender()
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9409384061040545"
     crossorigin="anonymous"></script>

     <!-- InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
<script type="text/javascript" async=true>
(function() {
  var host = "www.themoneytizer.com";
  var element = document.createElement('script');
  var firstScript = document.getElementsByTagName('script')[0];
  var url = 'https://cmp.inmobi.com'
    .concat('/choice/', '6Fv0cGNfc_bw8', '/', host, '/choice.js?tag_version=V3');
  var uspTries = 0;
  var uspTriesLimit = 3;
  element.async = true;
  element.type = 'text/javascript';
  element.src = url;

  firstScript.parentNode.insertBefore(element, firstScript);

  function makeStub() {
    var TCF_LOCATOR_NAME = '__tcfapiLocator';
    var queue = [];
    var win = window;
    var cmpFrame;

    function addFrame() {
      var doc = win.document;
      var otherCMP = !!(win.frames[TCF_LOCATOR_NAME]);

      if (!otherCMP) {
        if (doc.body) {
          var iframe = doc.createElement('iframe');

          iframe.style.cssText = 'display:none';
          iframe.name = TCF_LOCATOR_NAME;
          doc.body.appendChild(iframe);
        } else {
          setTimeout(addFrame, 5);
        }
      }
      return !otherCMP;
    }

    function tcfAPIHandler() {
      var gdprApplies;
      var args = arguments;

      if (!args.length) {
        return queue;
      } else if (args[0] === 'setGdprApplies') {
        if (
          args.length > 3 &&
          args[2] === 2 &&
          typeof args[3] === 'boolean'
        ) {
          gdprApplies = args[3];
          if (typeof args[2] === 'function') {
            args[2]('set', true);
          }
        }
      } else if (args[0] === 'ping') {
        var retr = {
          gdprApplies: gdprApplies,
          cmpLoaded: false,
          cmpStatus: 'stub'
        };

        if (typeof args[2] === 'function') {
          args[2](retr);
        }
      } else {
        if(args[0] === 'init' && typeof args[3] === 'object') {
          args[3] = Object.assign(args[3], { tag_version: 'V3' });
        }
        queue.push(args);
      }
    }

    function postMessageEventHandler(event) {
      var msgIsString = typeof event.data === 'string';
      var json = {};

      try {
        if (msgIsString) {
          json = JSON.parse(event.data);
        } else {
          json = event.data;
        }
      } catch (ignore) {}

      var payload = json.__tcfapiCall;

      if (payload) {
        window.__tcfapi(
          payload.command,
          payload.version,
          function(retValue, success) {
            var returnMsg = {
              __tcfapiReturn: {
                returnValue: retValue,
                success: success,
                callId: payload.callId
              }
            };
            if (msgIsString) {
              returnMsg = JSON.stringify(returnMsg);
            }
            if (event && event.source && event.source.postMessage) {
              event.source.postMessage(returnMsg, '*');
            }
          },
          payload.parameter
        );
      }
    }

    while (win) {
      try {
        if (win.frames[TCF_LOCATOR_NAME]) {
          cmpFrame = win;
          break;
        }
      } catch (ignore) {}

      if (win === window.top) {
        break;
      }
      win = win.parent;
    }
    if (!cmpFrame) {
      addFrame();
      win.__tcfapi = tcfAPIHandler;
      win.addEventListener('message', postMessageEventHandler, false);
    }
  };

  makeStub();

  var uspStubFunction = function() {
    var arg = arguments;
    if (typeof window.__uspapi !== uspStubFunction) {
      setTimeout(function() {
        if (typeof window.__uspapi !== 'undefined') {
          window.__uspapi.apply(window.__uspapi, arg);
        }
      }, 500);
    }
  };

  var checkIfUspIsReady = function() {
    uspTries++;
    if (window.__uspapi === uspStubFunction && uspTries < uspTriesLimit) {
      console.warn('USP is not accessible');
    } else {
      clearInterval(uspInterval);
    }
  };

  if (typeof window.__uspapi === 'undefined') {
    window.__uspapi = uspStubFunction;
    var uspInterval = setInterval(checkIfUspIsReady, 6000);
  }
})();
</script>
<!-- End InMobi Choice. Consent Manager Tag v3.0 (for TCF 2.2) -->
</body>
</html>