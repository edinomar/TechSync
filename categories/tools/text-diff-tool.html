<!doctype html>
<html lang="pt-BR">
<head>
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-NFY6RYBJZJ"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-NFY6RYBJZJ');
  </script>
  
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="google-adsense-account" content="ca-pub-9409384061040545">
  <title>Comparador de Texto — TechSync</title>

  <meta name="description" content="Compare dois blocos de texto ou código de forma rápida e fácil.">
  <meta name="keywords" content="comparador de texto, comparação de código, ferramenta online, diff, TechSync">
  <link rel="canonical" href="https://www.techsync.net.br/categories/tools/text-diff-tool.html">

  <!-- Autor -->
  <meta name="author" content="TechSync">

    <!-- Cor do tema -->
  <meta name="theme-color" content="#667eea">

  <!-- Favicon -->
  <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/css/style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  
    <!-- JSON-LD (SoftwareApplication / WebTool) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Comparador de Texto (Diff) — TechSync",
    "url": "https://www.techsync.net.br/categories/tools/text-diff-tool.html",
    "description": "Ferramenta gratuita para comparar blocos de código e texto por linha diretamente no navegador. Sem backend — rápido, seguro e fácil de usar.",
    "applicationCategory": "DeveloperTool",
    "operatingSystem": "All",
    "creator": {
      "@type": "Organization",
      "name": "TechSync",
      "url": "https://www.techsync.net.br/images/logo.png"
    }
  }
  </script>
  <style>
    .tool-wrap{max-width:1200px;margin:1rem auto;padding:20px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(13,24,48,0.06)}
    .tool-head{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .btn.ghost{background:transparent;border:1px solid #e6e9ef;color:#333}
    .panels{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
    .panel{border:1px solid #e6e9ef;border-radius:8px;overflow:hidden;display:flex}
    .panel h3{margin:0;padding:10px;background:#fafafa;border-bottom:1px solid #eee;font-size:14px;width:100%}
    textarea{width:100%;height:320px;border:0;padding:12px;box-sizing:border-box;font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:13px;resize:vertical;line-height:1.4}
    .line-numbers{background:#f7f7f7;border-right:1px solid #eee;padding:12px 6px;text-align:right;color:#888;font-family:Menlo,monospace;font-size:13px;user-select:none}
    .line-numbers div{height:1.4em}
    .result-wrap{margin-top:12px}
    .diff-row{display:flex;align-items:flex-start;border-bottom:1px solid #f0f2f6}
    .diff-line-num{width:50px;padding:8px 6px;background:#fbfbfb;border-right:1px solid #f0f2f6;color:#666;text-align:right;user-select:none}
    .diff-text{flex:1;padding:8px;white-space:pre-wrap;font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:13px}
    .row-equal{background:transparent}
    .row-added{background:#ecffef}
    .row-removed{background:#fff0f0}
    .unified{font-family:Menlo,monospace;background:#0b1220;color:#dbeafe;padding:12px;border-radius:8px;overflow:auto}
    .small{font-size:13px;color:#666}
    @media(max-width:900px){.panels{grid-template-columns:1fr} .diff-row{flex-direction:row}.diff-line-num{width:40px}}
  </style>
</head>
<body>
  <!-- Header -->
  <div id="header-container"></div>

  <!-- Breadcrumb -->
  <div class="breadcrumb-container">
    <nav class="breadcrumb">
      <a href="/"><i class="fas fa-home"></i> Início</a>
      <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
      <a href="/categories/tools/tools-index.html"><i class="fas fa-tools"></i> Ferramentas</a>
      <span class="breadcrumb-separator"><i class="fas fa-chevron-right"></i></span>
      <span>Comparador de Texto</span>
    </nav>
  </div>

  <main class="container">
    <div class="tool-wrap">
      <div class="tool-head">
        <div>
          <h2>Comparador de Texto (Diff)</h2>
          <div class="small">Compare dois blocos de texto/código e veja as diferenças por linha. Não precisa de backend — tudo no navegador.</div>
        </div>
        <div class="controls">
          <button class="btn" id="compareBtn">Comparar</button>
          <button class="btn ghost" id="unifiedBtn">Ver diff unificado</button>
          <button class="btn ghost" id="swapBtn">Trocar</button>
          <button class="btn ghost" id="clearBtn">Limpar</button>
        </div>
      </div>

      <div class="panels">
        <div class="panel">
          <h3>Original / Versão A</h3>
        </div>
        <div class="panel">
          <h3>Modificado / Versão B</h3>
        </div>
      </div>
      <div class="panels">
        <div class="panel">
          <div class="line-numbers" id="lineNumsLeft"></div>
          <textarea id="left" placeholder="Cole o texto original aqui...">function soma(a, b) {
  return a + b;
}

console.log(soma(2, 3));</textarea>
        </div>

        <div class="panel">
          <div class="line-numbers" id="lineNumsRight"></div>
          <textarea id="right" placeholder="Cole o texto modificado aqui...">function soma(a, b, c) {
  return a + b + (c || 0);
}

console.log(soma(2, 3));
console.log('Nova linha');</textarea>
        </div>
      </div>

      <div class="result-wrap" id="resultWrap"></div>

      <p class="small" style="margin-top:12px">Dica: use Ctrl+Enter para comparar rapidamente.</p>
    </div>

  </main>
  <!-- Footer -->
  <div id="footer-container"></div>
  <script src="/js/pageComponents.js"></script>
  
  <script>
    const leftTA = document.getElementById('left')
    const rightTA = document.getElementById('right')
    const resultWrap = document.getElementById('resultWrap')
    const compareBtn = document.getElementById('compareBtn')
    const swapBtn = document.getElementById('swapBtn')
    const clearBtn = document.getElementById('clearBtn')
    const unifiedBtn = document.getElementById('unifiedBtn')
    const lineNumsLeft = document.getElementById('lineNumsLeft')
    const lineNumsRight = document.getElementById('lineNumsRight')

    function updateLineNumbers(textarea, container){
      const lines = textarea.value.split(/\n/).length
      container.innerHTML = ''
      for(let i=1;i<=lines;i++){
        const div = document.createElement('div')
        div.textContent = i
        container.appendChild(div)
      }
    }

    [leftTA,rightTA].forEach((ta,idx)=>{
      ta.addEventListener('input', ()=> updateLineNumbers(ta, idx===0? lineNumsLeft: lineNumsRight))
      updateLineNumbers(ta, idx===0? lineNumsLeft: lineNumsRight)
    })

    function splitLines(s){
      return s.replace(/\r\n/g,'\n').replace(/\r/g,'\n').split('\n')
    }

    function buildLCS(a, b){
      const n = a.length, m = b.length
      const dp = Array(n+1).fill(null).map(()=>Array(m+1).fill(0))
      for(let i=1;i<=n;i++){
        for(let j=1;j<=m;j++){
          if(a[i-1] === b[j-1]) dp[i][j] = dp[i-1][j-1] + 1
          else dp[i][j] = Math.max(dp[i-1][j], dp[i][j-1])
        }
      }
      return dp
    }

    function backtrackDiff(a, b, dp){
      const res = []
      let i = a.length, j = b.length
      while(i>0 && j>0){
        if(a[i-1] === b[j-1]){ res.unshift({type:'=', a: a[i-1], b: b[j-1], lineA:i, lineB:j}); i--; j-- }
        else if(dp[i-1][j] >= dp[i][j-1]){ res.unshift({type:'-', a: a[i-1], lineA:i}); i-- }
        else { res.unshift({type:'+', b: b[j-1], lineB:j}); j-- }
      }
      while(i>0){ res.unshift({type:'-', a: a[i-1], lineA:i}); i-- }
      while(j>0){ res.unshift({type:'+', b: b[j-1], lineB:j}); j-- }
      return res
    }

    function renderSideBySide(diff){
      const container = document.createElement('div')
      diff.forEach(item=>{
        const row = document.createElement('div')
        row.className = 'diff-row'

        const leftNum = document.createElement('div')
        leftNum.className = 'diff-line-num'
        leftNum.textContent = item.lineA || ''
        const leftText = document.createElement('div')
        leftText.className = 'diff-text'
        leftText.textContent = item.a || ''
        if(item.type==='-') leftText.classList.add('row-removed')

        const rightNum = document.createElement('div')
        rightNum.className = 'diff-line-num'
        rightNum.textContent = item.lineB || ''
        const rightText = document.createElement('div')
        rightText.className = 'diff-text'
        rightText.textContent = item.b || ''
        if(item.type==='+') rightText.classList.add('row-added')

        row.appendChild(leftNum)
        row.appendChild(leftText)
        row.appendChild(rightNum)
        row.appendChild(rightText)
        container.appendChild(row)
      })
      return container
    }

    function renderUnified(diff){
      const lines = []
      diff.forEach(item=>{
        if(item.type==='=') lines.push('  ' + item.a)
        else if(item.type==='-') lines.push('- ' + item.a)
        else if(item.type==='+') lines.push('+ ' + item.b)
      })
      const pre = document.createElement('pre')
      pre.className = 'unified'
      pre.textContent = lines.join('\n')
      return pre
    }

    function computeAndRender(){
      const a = splitLines(leftTA.value)
      const b = splitLines(rightTA.value)
      const dp = buildLCS(a,b)
      const diff = backtrackDiff(a,b,dp)
      resultWrap.innerHTML = ''
      resultWrap.appendChild(renderSideBySide(diff))
      resultWrap._lastDiff = diff
    }

    compareBtn.addEventListener('click', computeAndRender)
    unifiedBtn.addEventListener('click', ()=>{
      if(!resultWrap._lastDiff) computeAndRender()
      const pre = renderUnified(resultWrap._lastDiff)
      const existing = resultWrap.querySelector('.unified')
      if(existing){ existing.remove() }
      else { resultWrap.appendChild(pre) }
    })

    swapBtn.addEventListener('click', ()=>{
      const t = leftTA.value; leftTA.value = rightTA.value; rightTA.value = t; computeAndRender(); updateLineNumbers(leftTA,lineNumsLeft); updateLineNumbers(rightTA,lineNumsRight);
    })

    clearBtn.addEventListener('click', ()=>{ leftTA.value = ''; rightTA.value = ''; resultWrap.innerHTML = ''; updateLineNumbers(leftTA,lineNumsLeft); updateLineNumbers(rightTA,lineNumsRight) })

    [leftTA, rightTA].forEach(el=> el.addEventListener('keydown', (e)=>{ if((e.ctrlKey||e.metaKey) && e.key === 'Enter'){ computeAndRender() } }))

    computeAndRender()
  </script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9409384061040545"
     crossorigin="anonymous"></script>

</body>
</html>